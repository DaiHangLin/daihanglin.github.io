<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>戴杭林</title>
  
  <subtitle>不负好时光。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://daihanglin.github.io/"/>
  <updated>2017-10-19T09:01:26.000Z</updated>
  <id>https://daihanglin.github.io/</id>
  
  <author>
    <name>戴杭林</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>修改progressBar的样式</title>
    <link href="https://daihanglin.github.io/2017/10/19/%E4%BF%AE%E6%94%B9progressBar%E7%9A%84%E6%A0%B7%E5%BC%8F/"/>
    <id>https://daihanglin.github.io/2017/10/19/修改progressBar的样式/</id>
    <published>2017-10-19T07:27:56.000Z</published>
    <updated>2017-10-19T09:01:26.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一-progressBar简介"><a href="#一-progressBar简介" class="headerlink" title="一 progressBar简介"></a>一 progressBar简介</h1><blockquote><p>  A single visual indicator should be used to represent each type of operation. For example, a refresh operation should display either a refresh bar or an activity circle, but not both.</p><p> Determinate indicators display how long an operation will take.<br> Indeterminate indicators visualize an unspecified wait time.<br> <a href="https://material.io/guidelines/components/progress-activity.html#" target="_blank" rel="external">https://material.io/guidelines/components/progress-activity.html#</a> </p></blockquote><p>progressBar是非常常见的一个控件，他的主要用途在于当app在进行耗时操作，比如下载文件，加载数据时，避免UI的无响应，给用户一个好的用户体验<br><img src="/2017/10/19/修改progressBar的样式/progress.png" alt="progress.png" title=""><br><a id="more"></a></p><h1 id="二-progressBar类型"><a href="#二-progressBar类型" class="headerlink" title="二 progressBar类型"></a>二 progressBar类型</h1><blockquote><ol><li>Determinate indicators 一般在用户关心进度的比如下载百分之几的时候使用</li><li>Indeterminate indicators 用户不关心进度，但是需要等待上一个请求的结果时使用</li></ol></blockquote><h1 id="三-progressBar的样式"><a href="#三-progressBar的样式" class="headerlink" title="三 progressBar的样式"></a>三 progressBar的样式</h1><h2 id="linear-线条类型"><a href="#linear-线条类型" class="headerlink" title="linear 线条类型"></a>linear 线条类型</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></div><div class="line"><span class="tag">   <span class="attr">style</span>=<span class="string">"@android:style/Widget.ProgressBar.Horizontal"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:layout_height</span>=<span class="string">"50dp"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:layout_marginTop</span>=<span class="string">"650dp"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:max</span>=<span class="string">"100"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:progress</span>=<span class="string">"50"</span></span></div><div class="line"><span class="tag">   <span class="attr">android:secondaryProgress</span>=<span class="string">"70"</span>/&gt;</span></div></pre></td></tr></table></figure><h3 id="对应的样式"><a href="#对应的样式" class="headerlink" title="对应的样式"></a>对应的样式</h3><img src="/2017/10/19/修改progressBar的样式/progress_linear.png" alt="progress_linear.png" title=""><h3 id="查看-Widget-ProgressBar-Horizontal"><a href="#查看-Widget-ProgressBar-Horizontal" class="headerlink" title="查看 Widget.ProgressBar.Horizontal"></a>查看 <code>Widget.ProgressBar.Horizontal</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.ProgressBar.Horizontal"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"indeterminateOnly"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"progressDrawable"</span>&gt;</span>@drawable/progress_horizontal<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"indeterminateDrawable"</span>&gt;</span>@drawable/progress_indeterminate_horizontal<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"minHeight"</span>&gt;</span>20dip<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"maxHeight"</span>&gt;</span>20dip<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"mirrorForRtl"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="得到结论"><a href="#得到结论" class="headerlink" title="得到结论"></a>得到结论</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;item name=&quot;indeterminateOnly&quot;&gt;false&lt;/item&gt;` 默认是Determinate,适用于下载文件之类场景时使用</div><div class="line">&lt;item name=&quot;progressDrawable&quot;&gt;@drawable/progress_horizontal&lt;/item&gt; 我们关心的样式progress_horizontal里面</div></pre></td></tr></table></figure><h3 id="继续查看progress-horizontal"><a href="#继续查看progress-horizontal" class="headerlink" title="继续查看progress_horizontal"></a>继续查看<code>progress_horizontal</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/background"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"5dip"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">gradient</span></span></div><div class="line"><span class="tag">                    <span class="attr">android:startColor</span>=<span class="string">"#ff9d9e9d"</span></span></div><div class="line"><span class="tag">                    <span class="attr">android:centerColor</span>=<span class="string">"#ff5a5d5a"</span></span></div><div class="line"><span class="tag">                    <span class="attr">android:centerY</span>=<span class="string">"0.75"</span></span></div><div class="line"><span class="tag">                    <span class="attr">android:endColor</span>=<span class="string">"#ff747674"</span></span></div><div class="line"><span class="tag">                    <span class="attr">android:angle</span>=<span class="string">"270"</span></span></div><div class="line"><span class="tag">            /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/secondaryProgress"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">clip</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"5dip"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">gradient</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:startColor</span>=<span class="string">"#80ffd300"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:centerColor</span>=<span class="string">"#80ffb600"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:centerY</span>=<span class="string">"0.75"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:endColor</span>=<span class="string">"#a0ffcb00"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:angle</span>=<span class="string">"270"</span></span></div><div class="line"><span class="tag">                /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/progress"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">clip</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">shape</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"5dip"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">gradient</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:startColor</span>=<span class="string">"#ffffd300"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:centerColor</span>=<span class="string">"#ffffb600"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:centerY</span>=<span class="string">"0.75"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:endColor</span>=<span class="string">"#ffffcb00"</span></span></div><div class="line"><span class="tag">                        <span class="attr">android:angle</span>=<span class="string">"270"</span></span></div><div class="line"><span class="tag">                /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    </div><div class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="得到结论-1"><a href="#得到结论-1" class="headerlink" title="得到结论"></a>得到结论</h3><blockquote><p>可以通过修改style来修改样式</p></blockquote><h3 id="定义一个progressDrawable来取代android-progressDrawable"><a href="#定义一个progressDrawable来取代android-progressDrawable" class="headerlink" title="定义一个progressDrawable来取代android:progressDrawable"></a>定义一个progressDrawable来取代<code>android:progressDrawable</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/background"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">color</span> <span class="attr">android:color</span>=<span class="string">"@android:color/transparent"</span>&gt;</span><span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/secondaryProgress"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:left</span>=<span class="string">"5dp"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:top</span>=<span class="string">"3dp"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:bottom</span>=<span class="string">"3dp"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">clip</span> <span class="attr">android:clipOrientation</span>=<span class="string">"horizontal"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">nine-patch</span> <span class="attr">android:src</span>=<span class="string">"@drawable/green"</span> <span class="attr">android:dither</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">nine-patch</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@android:id/progress"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:left</span>=<span class="string">"5dp"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:top</span>=<span class="string">"3dp"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:bottom</span>=<span class="string">"3dp"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">clip</span> <span class="attr">android:clipOrientation</span>=<span class="string">"horizontal"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">nine-patch</span> <span class="attr">android:src</span>=<span class="string">"@drawable/blue"</span> <span class="attr">android:dither</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">nine-patch</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">clip</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="修改-lt-progressBar-gt"><a href="#修改-lt-progressBar-gt" class="headerlink" title="修改&lt;progressBar/&gt;"></a>修改<code>&lt;progressBar/&gt;</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></div><div class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/progress"</span></span></div><div class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"@android:style/Widget.ProgressBar.Horizontal"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"60dp"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_gravity</span>=<span class="string">"center"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@mipmap/bg_progress_background"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:max</span>=<span class="string">"100"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:paddingBottom</span>=<span class="string">"3dp"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:paddingLeft</span>=<span class="string">"5dp"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:paddingRight</span>=<span class="string">"5dp"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:paddingTop</span>=<span class="string">"3dp"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:progress</span>=<span class="string">"60"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:progressDrawable</span>=<span class="string">"@drawable/bg_progress_drawable"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:secondaryProgress</span>=<span class="string">"72"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">"210dp"</span>/&gt;</span></div></pre></td></tr></table></figure><h3 id="对应的样式-1"><a href="#对应的样式-1" class="headerlink" title="对应的样式"></a>对应的样式</h3><img src="/2017/10/19/修改progressBar的样式/progress_linear_custom.png" alt="progress_linear_custom.png" title=""><h2 id="Circular-圆形的"><a href="#Circular-圆形的" class="headerlink" title="Circular 圆形的"></a>Circular 圆形的</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></div><div class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/progress4"</span></span></div><div class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"@android:style/Widget.Material.ProgressBar"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:layout_marginTop</span>=<span class="string">"200dp"</span>/&gt;</span></div></pre></td></tr></table></figure><h3 id="对应的样式-2"><a href="#对应的样式-2" class="headerlink" title="对应的样式"></a>对应的样式</h3><img src="/2017/10/19/修改progressBar的样式/progress_circular_material.png" alt="progress_circular_material.png" title="">]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;一-progressBar简介&quot;&gt;&lt;a href=&quot;#一-progressBar简介&quot; class=&quot;headerlink&quot; title=&quot;一 progressBar简介&quot;&gt;&lt;/a&gt;一 progressBar简介&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;  A single visual indicator should be used to represent each type of operation. For example, a refresh operation should display either a refresh bar or an activity circle, but not both.&lt;/p&gt;
&lt;p&gt; Determinate indicators display how long an operation will take.&lt;br&gt; Indeterminate indicators visualize an unspecified wait time.&lt;br&gt; &lt;a href=&quot;https://material.io/guidelines/components/progress-activity.html#&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://material.io/guidelines/components/progress-activity.html#&lt;/a&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;progressBar是非常常见的一个控件，他的主要用途在于当app在进行耗时操作，比如下载文件，加载数据时，避免UI的无响应，给用户一个好的用户体验&lt;br&gt;&lt;img src=&quot;/2017/10/19/修改progressBar的样式/progress.png&quot; alt=&quot;progress.png&quot; title=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Android" scheme="https://daihanglin.github.io/categories/Android/"/>
    
    
      <category term="UI" scheme="https://daihanglin.github.io/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>git使用笔记</title>
    <link href="https://daihanglin.github.io/2017/10/16/git%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
    <id>https://daihanglin.github.io/2017/10/16/git使用笔记/</id>
    <published>2017-10-16T10:25:11.000Z</published>
    <updated>2017-10-16T11:03:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="————-2017-10-12-—————"><a href="#————-2017-10-12-—————" class="headerlink" title="————   2017.10.12 —————"></a>————   2017.10.12 —————</h1><h2 id="1-git-status"><a href="#1-git-status" class="headerlink" title="1. git status"></a>1. git status</h2><p>//查看git status 可能存在三种文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一种 未被跟踪的文件，即新添加的文件</span></div><div class="line"><span class="number">1.1</span>  Untracked files:  </div><div class="line">  <span class="comment">//git add &lt;file&gt; 将文件添加staged中</span></div><div class="line">  <span class="number">1.1</span>.1 (use <span class="string">"git add &lt;file&gt;..."</span> to include in what will be committed)</div><div class="line"><span class="comment">//第二种 已添加的文件且还未加入到staged中</span></div><div class="line"><span class="number">1.2</span>  Changes not staged <span class="keyword">for</span> commit </div><div class="line">  <span class="number">1.2</span>.1 (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</div><div class="line">  <span class="comment">//git checkout -- &lt;file&gt; 撤销对该文件的修改</span></div><div class="line">  <span class="number">1.2</span>.2 (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes in working directory)</div><div class="line"><span class="comment">//第三种 已加入到暂存中,可以提交</span></div><div class="line"><span class="number">1.3</span>  Changes to be committed</div><div class="line">  <span class="comment">// git reset HEAD &lt;file&gt;  取消暂存</span></div><div class="line">  <span class="number">1.3</span>.1 (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</div></pre></td></tr></table></figure><h2 id="先添加修改的文件staged中"><a href="#先添加修改的文件staged中" class="headerlink" title="先添加修改的文件staged中"></a>先添加修改的文件staged中</h2><pre><code>git add a1.txtgit add a2.txt</code></pre><a id="more"></a><h2 id="reset-默认是第一个commit前-并且不在暂存中"><a href="#reset-默认是第一个commit前-并且不在暂存中" class="headerlink" title="reset 默认是第一个commit前 并且不在暂存中"></a>reset 默认是第一个commit前 并且不在暂存中</h2><pre><code>git reset --mixed (HEAD~0)  git status //发现所有修改的文件都在unstaged中</code></pre><h2 id="添加所有文件添加到暂存中"><a href="#添加所有文件添加到暂存中" class="headerlink" title="添加所有文件添加到暂存中"></a>添加所有文件添加到暂存中</h2><pre><code>git add .git commit //新增一次commit记录git log //查看历史提交记录  // 1 commit a4863  // 2 commit f7a86</code></pre><h1 id="2-git-reset"><a href="#2-git-reset" class="headerlink" title="2.git reset"></a>2.git reset</h1><h2 id="将1的commit删除，并且所有的修改都不在暂存中"><a href="#将1的commit删除，并且所有的修改都不在暂存中" class="headerlink" title="将1的commit删除，并且所有的修改都不在暂存中"></a>将1的commit删除，并且所有的修改都不在暂存中</h2><pre><code>git reset --mixed HEAD~1// 将1的commit删除，并且所有的修改都不在暂存中</code></pre><h2 id="将1的commit删除，并且所有的修改都在暂存中"><a href="#将1的commit删除，并且所有的修改都在暂存中" class="headerlink" title="将1的commit删除，并且所有的修改都在暂存中"></a>将1的commit删除，并且所有的修改都在暂存中</h2><pre><code>git reset --soft HEAD~1// 将1的commit删除，并且所有的修改都在暂存中</code></pre><h2 id="将1的commit删除，并且丢弃所有的修改"><a href="#将1的commit删除，并且丢弃所有的修改" class="headerlink" title="将1的commit删除，并且丢弃所有的修改"></a>将1的commit删除，并且丢弃所有的修改</h2><pre><code>git reset --hard HEAD~1// 将1的commit删除，并且丢弃所有的修改</code></pre><h1 id="3-git-rebase"><a href="#3-git-rebase" class="headerlink" title="3. git rebase"></a>3. git rebase</h1><h2 id="git-rebase-i-对最近的几次commit进行修改"><a href="#git-rebase-i-对最近的几次commit进行修改" class="headerlink" title="git rebase -i //对最近的几次commit进行修改"></a>git rebase -i //对最近的几次commit进行修改</h2><pre><code>git rebase -i HEAD~2  //  pick f7a8619  commnet1  //  pick a4863c2  comment2  //  rebase 有几个Commands     10.1.1 pick     // use commit    10.1.2 reword   // use commit, but edit the commit message    10.1.3 edit     // use commit, but stop for amending    10.1.4 squash   // use commit, but meld into previous commit    10.1.5 fixup    // like &quot;squash&quot;, but discard this commit&apos;s log message    10.1.6 exec     // run command (the rest of the line) using shell10.2 //也可以直接删除一条记录  这样的话这条commit就会被删除  </code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;————-2017-10-12-—————&quot;&gt;&lt;a href=&quot;#————-2017-10-12-—————&quot; class=&quot;headerlink&quot; title=&quot;————   2017.10.12 —————&quot;&gt;&lt;/a&gt;————   2017.10.12 —————&lt;/h1&gt;&lt;h2 id=&quot;1-git-status&quot;&gt;&lt;a href=&quot;#1-git-status&quot; class=&quot;headerlink&quot; title=&quot;1. git status&quot;&gt;&lt;/a&gt;1. git status&lt;/h2&gt;&lt;p&gt;//查看git status 可能存在三种文件&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//第一种 未被跟踪的文件，即新添加的文件&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.1&lt;/span&gt;  Untracked files:  &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//git add &amp;lt;file&amp;gt; 将文件添加staged中&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;1.1&lt;/span&gt;.1 (use &lt;span class=&quot;string&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to include in what will be committed)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//第二种 已添加的文件且还未加入到staged中&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;  Changes not staged &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; commit &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;.1 (use &lt;span class=&quot;string&quot;&gt;&quot;git add &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to update what will be committed)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//git checkout -- &amp;lt;file&amp;gt; 撤销对该文件的修改&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt;.2 (use &lt;span class=&quot;string&quot;&gt;&quot;git checkout -- &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to discard changes in working directory)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//第三种 已加入到暂存中,可以提交	&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;1.3&lt;/span&gt;  Changes to be committed&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// git reset HEAD &amp;lt;file&amp;gt;  取消暂存&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;number&quot;&gt;1.3&lt;/span&gt;.1 (use &lt;span class=&quot;string&quot;&gt;&quot;git reset HEAD &amp;lt;file&amp;gt;...&quot;&lt;/span&gt; to unstage)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;先添加修改的文件staged中&quot;&gt;&lt;a href=&quot;#先添加修改的文件staged中&quot; class=&quot;headerlink&quot; title=&quot;先添加修改的文件staged中&quot;&gt;&lt;/a&gt;先添加修改的文件staged中&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;git add a1.txt
git add a2.txt
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="努力努力" scheme="https://daihanglin.github.io/categories/%E5%8A%AA%E5%8A%9B%E5%8A%AA%E5%8A%9B/"/>
    
    
      <category term="Git" scheme="https://daihanglin.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>FlexBoxLayout与RecycleView配合使用</title>
    <link href="https://daihanglin.github.io/2017/10/16/FlexBoxLayout%E4%B8%8ERecycleView%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8/"/>
    <id>https://daihanglin.github.io/2017/10/16/FlexBoxLayout与RecycleView配合使用/</id>
    <published>2017-10-16T09:46:57.000Z</published>
    <updated>2017-10-16T09:47:48.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="努力努力" scheme="https://daihanglin.github.io/categories/%E5%8A%AA%E5%8A%9B%E5%8A%AA%E5%8A%9B/"/>
    
    
      <category term="Android" scheme="https://daihanglin.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>优雅的使用Html.ImageGetter</title>
    <link href="https://daihanglin.github.io/2017/10/13/imageGetter/"/>
    <id>https://daihanglin.github.io/2017/10/13/imageGetter/</id>
    <published>2017-10-13T11:36:23.000Z</published>
    <updated>2017-10-16T11:01:36.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-使用ImageGetter的场景"><a href="#1-使用ImageGetter的场景" class="headerlink" title="1. 使用ImageGetter的场景"></a>1. 使用ImageGetter的场景</h1><p>   Android中用于显示文本的控件为textView，textView不仅仅能显示文本，同时也能显示富文本，即一些包含html标签的文本。</p><pre><code>//显示普通文本textView.setText(&quot;普通文本&quot;);//显示html富文本textView.setText(Html.fromHtml(&quot;&lt;b&gt;普通文本&lt;/b&gt;&quot;))//显示html富文本且包含图片textView.setText(Html.fromHtml(&quot;&lt;b&gt;普通文本&lt;/b&gt;&lt;img src = &quot;url&quot;&gt;&lt;/img&gt;&quot;, imageGetter, tagHandler))</code></pre><h1 id="2-ImageGetter介绍"><a href="#2-ImageGetter介绍" class="headerlink" title="2. ImageGetter介绍"></a>2. ImageGetter介绍</h1>  <img src="/2017/10/13/imageGetter/imagegetter.png" alt="imagegetter.png" title=""><p>  ImageGetter是一个接口，主要用于解析 “&lt;img src =”/&gt;”里的src属性，返回drawable，再使用drawable时需要确保drawable里有大小即Bounds</p> <a id="more"></a><h1 id="3-简单示例"><a href="#3-简单示例" class="headerlink" title="3. 简单示例"></a>3. 简单示例</h1><ul><li>新建activity</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestImageGetter</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</div><div class="line">    </div><div class="line"><span class="keyword">private</span> TextView tv;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url1 = <span class="string">"https://ss1.bdstatic.com/kvoZeXSm1A5BphGlnYG/newmusic/jingdianlaoge.png"</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url2 = <span class="string">"https://ss0.bdstatic.com/k4oZeXSm1A5BphGlnYG/newmusic/lovesong.png"</span>;</div><div class="line">    </div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.act_tv_demo);</div><div class="line">    tv = (TextView) findViewById(R.id.tv);</div><div class="line">    String source = <span class="string">"this is a test of &lt;b&gt;ImageGetter&lt;/b&gt; it contains "</span> +</div><div class="line">            <span class="string">"two images: &lt;br/&gt;"</span> +</div><div class="line">            <span class="string">"&lt;img src=\""</span> + url1 + <span class="string">"\"&gt;and"</span> +</div><div class="line">            <span class="string">"&lt;img src=\""</span> + url2 + <span class="string">"\"&gt;"</span>;</div><div class="line">    MyImageGetter myImageGetter = <span class="keyword">new</span> MyImageGetter();</div><div class="line">    tv.setText(Html.fromHtml(source, myImageGetter, <span class="keyword">null</span>));</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyImageGetter</span> <span class="keyword">implements</span> <span class="title">Html</span>.<span class="title">ImageGetter</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Drawable <span class="title">getDrawable</span><span class="params">(String source)</span> </span>&#123;</div><div class="line">        Drawable drawable = getResources().getDrawable(R.mipmap.ic_launcher);</div><div class="line">        drawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, drawable.getIntrinsicWidth(),</div><div class="line">        drawable.getIntrinsicHeight());</div><div class="line">        <span class="keyword">return</span> drawable;</div><div class="line">       &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>在AndroidManifest中注册activity</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".TestImageGetter"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure><ul><li>运行后结果</li></ul><img src="/2017/10/13/imageGetter/imagegetter_result1.png" alt="imagegetter_result1.png" title=""><h1 id="4-加载网络图片"><a href="#4-加载网络图片" class="headerlink" title="4. 加载网络图片"></a>4. 加载网络图片</h1><p>选择目前android上加载图片比较好的框架：<a href="https://github.com/bumptech/glide" target="_blank" rel="external">Glide</a></p><h2 id="step1-添加网络访问权限"><a href="#step1-添加网络访问权限" class="headerlink" title="step1: 添加网络访问权限"></a>step1: 添加网络访问权限</h2>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="step2-添加类库"><a href="#step2-添加类库" class="headerlink" title="step2: 添加类库"></a>step2: 添加类库</h2>  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//project的build.gradle</span></div><div class="line">allprojects &#123;</div><div class="line">   repositories &#123;</div><div class="line">     jcenter()</div><div class="line">     maven &#123; url <span class="string">'https://maven.google.com'</span> &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//module的build.gradle</span></div><div class="line">dependencies &#123;</div><div class="line">   compile <span class="string">'com.github.bumptech.glide:glide:4.2.0'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="step3-修改ImageGetter中getDrawable的实现方式"><a href="#step3-修改ImageGetter中getDrawable的实现方式" class="headerlink" title="step3: 修改ImageGetter中getDrawable的实现方式"></a>step3: 修改ImageGetter中getDrawable的实现方式</h2><ul><li><p>step3.1 自定义Drawable，因为ImageGetter接口返回的Drawable是不可变的，但是在加载网络图片完成后需要更新图片，因此在Drawable外加一个Wrapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//查看ImageGetter接口</span></div><div class="line"><span class="comment">//public static interface ImageGetter &#123;           </span></div><div class="line"><span class="comment">//    public Drawable getDrawable(String source);</span></div><div class="line"><span class="comment">//&#125;</span></div><div class="line"><span class="comment">//实现DrawableWrapper</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDrawableWrapper</span> <span class="keyword">extends</span> <span class="title">BitmapDrawable</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Drawable drawable;</div><div class="line"></div><div class="line">    MyDrawableWrapper() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (drawable != <span class="keyword">null</span>)</div><div class="line">            drawable.draw(canvas);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Drawable <span class="title">getDrawable</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> drawable;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDrawable</span><span class="params">(Drawable drawable)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.drawable = drawable;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><ul><li><p>step3.2 利用Glide加载网络图片</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyImageGetter</span> <span class="keyword">implements</span> <span class="title">Html</span>.<span class="title">ImageGetter</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Drawable <span class="title">getDrawable</span><span class="params">(String source)</span> </span>&#123;</div><div class="line">        MyDrawableWrapper myDrawable = <span class="keyword">new</span> MyDrawableWrapper();</div><div class="line">        Drawable drawable = getResources().getDrawable(R.mipmap.ic_launcher);</div><div class="line">        drawable.setBounds(</div><div class="line">                <span class="number">0</span>, </div><div class="line">                <span class="number">0</span>, </div><div class="line">                drawable.getIntrinsicWidth(),</div><div class="line">                drawable.getIntrinsicHeight());</div><div class="line">        myDrawable.setDrawable(drawable);</div><div class="line">        Glide.with(TestImageGetter.<span class="keyword">this</span>)</div><div class="line">                .asBitmap()</div><div class="line">                .load(source)</div><div class="line">                .into(<span class="keyword">new</span> BitmapTarget(myDrawable));</div><div class="line">        <span class="keyword">return</span> myDrawable;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BitmapTarget</span> <span class="keyword">extends</span> <span class="title">SimpleTarget</span>&lt;<span class="title">Bitmap</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MyDrawableWrapper myDrawable;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BitmapTarget</span><span class="params">(MyDrawableWrapper myDrawable)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.myDrawable = myDrawable;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResourceReady</span><span class="params">(Bitmap resource, Transition&lt;? <span class="keyword">super</span> Bitmap&gt; transition)</span> </span>&#123;</div><div class="line">        Drawable drawable = <span class="keyword">new</span> BitmapDrawable(getResources(), resource);</div><div class="line">        <span class="comment">//获取原图大小</span></div><div class="line">        <span class="keyword">int</span> width=drawable.getIntrinsicWidth() ;</div><div class="line">        <span class="keyword">int</span> height=drawable.getIntrinsicHeight();</div><div class="line">        <span class="comment">//自定义drawable的高宽, 缩放图片大小最好用matrix变化，可以保证图片不失真</span></div><div class="line">        drawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>, <span class="number">500</span>);</div><div class="line">        myDrawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>, <span class="number">500</span>);</div><div class="line">        myDrawable.setDrawable(drawable);</div><div class="line">        tv.setText(tv.getText());</div><div class="line">        tv.invalidate();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><ul><li>step4 查看运行结果<img src="/2017/10/13/imageGetter/imagegetter_result2.png" alt="imagegetter_result2.png" title=""></li></ul><h1 id="5-响应点击事件"><a href="#5-响应点击事件" class="headerlink" title="5. 响应点击事件"></a>5. 响应点击事件</h1><blockquote><p>  假设有个需求需要点击图片后能够全屏查看，最简单的方法就是跳转到新的activity，因此就需要响应每个图片的点击事件</p></blockquote><p>关键思路</p><pre><code>1. activity利用action去响应html的文本的点击事件即隐式启动activity2. 自定义html文本的规则，给每个需要添加 “ &lt;a href = &quot;ACTION_STRING://?source=DATA&quot;&gt;&lt;img/&gt;(或者其他的标签)&lt;/a&gt;”3. ACTION_STRING 为自定义需要响应的action4. source = DATA 为向另一个activity传递的数据</code></pre><h2 id="5-1-如何响应image的点击事件"><a href="#5-1-如何响应image的点击事件" class="headerlink" title="5.1 如何响应image的点击事件"></a>5.1 如何响应image的点击事件</h2><blockquote><p>因为整体为一个textView，因此给textView设置点击事件是不实际的，所以需要寻找另外的解决方案</p></blockquote><ul><li><p>方案一 ： 得到imageSpans 给每个imageSpans设置点击事件，但是这样只能处理图片</p><pre><code>Spanned spanned = Html.fromHtml();SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(spanned)ImageSpan[] imageSpans = spannableStringBuilder.getSpans(0, spannableStringBuilder.length(), ImageSpan.class);</code></pre></li><li>方案二 ： 在富文本上添加”<a href="href"></a>“的标签，点击后会发生一个action，activity根据Intent-filter来响应action，</li></ul><h2 id="5-2-activity去响应action"><a href="#5-2-activity去响应action" class="headerlink" title="5.2 activity去响应action"></a>5.2 activity去响应action</h2><ul><li>step1 新建ImageActivity，跳转后的activity，全屏查看大图，并且设置需要响应的自定义action</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".ImageActivity"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"com.lin.action.custom.image"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure><ul><li>step2 修改TestImageGetterActivity的代码，添加响应事件，需要修改的只有 html富文本罢了</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> TextView tv;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url1 = <span class="string">"https://ss1.bdstatic.com/kvoZeXSm1A5BphGlnYG/newmusic/jingdianlaoge.png"</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url2 = <span class="string">"https://ss0.bdstatic.com/k4oZeXSm1A5BphGlnYG/newmusic/lovesong.png"</span>;</div><div class="line">    <span class="comment">// 添加需要响应的 action  </span></div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String ACTION_IMAGE = <span class="string">"com.lin.action.custom.image"</span>;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.act_tv_demo);</div><div class="line">    tv = (TextView) findViewById(R.id.tv);</div><div class="line">    </div><div class="line">    <span class="comment">// 在每个html的image标签 或者说 需要添加点击响应事件的文本添加</span></div><div class="line">    <span class="comment">// &lt;a href ="ACTION_STRING://?source=data"&gt;</span></div><div class="line">    String source = <span class="string">"this is a test of &lt;b&gt;ImageGetter&lt;/b&gt; it contains "</span> +</div><div class="line">            <span class="string">"two images: &lt;br/&gt;"</span> +</div><div class="line">            <span class="string">"&lt;a href=\""</span> + ACTION_IMAGE + <span class="string">"://?source="</span> + url1 + <span class="string">"\"&gt;"</span> +</div><div class="line">            <span class="string">"&lt;img src=\""</span> + url1 + <span class="string">"\"&gt;&lt;/a&gt;"</span> +</div><div class="line">            <span class="string">"&lt;br/&gt;and&lt;br/&gt;"</span> +</div><div class="line">            <span class="string">"&lt;a href=\""</span> + ACTION_IMAGE + <span class="string">"://?source="</span> + url2 + <span class="string">"\"&gt;"</span> +</div><div class="line">            <span class="string">"&lt;img src=\""</span> + url2 + <span class="string">"\"&gt;&lt;/a&gt;"</span>;</div><div class="line">    MyImageGetter myImageGetter = <span class="keyword">new</span> MyImageGetter();</div><div class="line">    tv.setText(Html.fromHtml(source, myImageGetter, <span class="keyword">null</span>));</div><div class="line">    tv.setMovementMethod(LinkMovementMethod.getInstance());</div><div class="line">&#125;</div></pre></td></tr></table></figure><h1 id="6-查看运行结果"><a href="#6-查看运行结果" class="headerlink" title="6. 查看运行结果"></a>6. 查看运行结果</h1><img src="/2017/10/13/imageGetter/imagegetter_result3.png" alt="imagegetter_result3.png" title=""><h1 id="7-需要改进"><a href="#7-需要改进" class="headerlink" title="7. 需要改进"></a>7. 需要改进</h1><ul><li>如何高效的缩放图片 – 利用matrix</li><li>如何去响应html文本中视频或者音频 – 同样parse html，生成不同的action，区别处理</li><li>activity是如何响应action的 – 隐式启动activity，平时选择照片或者打电话都是隐式启动<br>具体可以查阅官网</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;1-使用ImageGetter的场景&quot;&gt;&lt;a href=&quot;#1-使用ImageGetter的场景&quot; class=&quot;headerlink&quot; title=&quot;1. 使用ImageGetter的场景&quot;&gt;&lt;/a&gt;1. 使用ImageGetter的场景&lt;/h1&gt;&lt;p&gt;   Android中用于显示文本的控件为textView，textView不仅仅能显示文本，同时也能显示富文本，即一些包含html标签的文本。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//显示普通文本
textView.setText(&amp;quot;普通文本&amp;quot;);
//显示html富文本
textView.setText(Html.fromHtml(&amp;quot;&amp;lt;b&amp;gt;普通文本&amp;lt;/b&amp;gt;&amp;quot;))
//显示html富文本且包含图片
textView.setText(Html.fromHtml(&amp;quot;&amp;lt;b&amp;gt;普通文本&amp;lt;/b&amp;gt;&amp;lt;img src = &amp;quot;url&amp;quot;&amp;gt;&amp;lt;/img&amp;gt;&amp;quot;, imageGetter, tagHandler))
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;2-ImageGetter介绍&quot;&gt;&lt;a href=&quot;#2-ImageGetter介绍&quot; class=&quot;headerlink&quot; title=&quot;2. ImageGetter介绍&quot;&gt;&lt;/a&gt;2. ImageGetter介绍&lt;/h1&gt;  &lt;img src=&quot;/2017/10/13/imageGetter/imagegetter.png&quot; alt=&quot;imagegetter.png&quot; title=&quot;&quot;&gt;
&lt;p&gt;  ImageGetter是一个接口，主要用于解析 “&amp;lt;img src =”/&amp;gt;”里的src属性，返回drawable，再使用drawable时需要确保drawable里有大小即Bounds&lt;/p&gt;
    
    </summary>
    
      <category term="努力努力" scheme="https://daihanglin.github.io/categories/%E5%8A%AA%E5%8A%9B%E5%8A%AA%E5%8A%9B/"/>
    
    
      <category term="Android" scheme="https://daihanglin.github.io/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>图片压缩工具</title>
    <link href="https://daihanglin.github.io/2017/10/11/TinyPng/"/>
    <id>https://daihanglin.github.io/2017/10/11/TinyPng/</id>
    <published>2017-10-11T11:36:23.000Z</published>
    <updated>2017-10-16T10:16:55.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="TinyPng"><a href="#TinyPng" class="headerlink" title="TinyPng"></a>TinyPng</h1><ul><li>推荐一个超级好用的图片压缩工具 – <a href="https://tinypng.com/" target="_blank" rel="external">TinyPng</a></li></ul><p>举个栗子，看不出有区别，而且还支持开发者接入<br>//压缩前<br><img src="/2017/10/11/TinyPng/compress_after.png" alt="压缩前" title="压缩前"><br>//压缩后<br><img src="/2017/10/11/TinyPng/compress_after.png" alt="压缩后" title="压缩后"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;TinyPng&quot;&gt;&lt;a href=&quot;#TinyPng&quot; class=&quot;headerlink&quot; title=&quot;TinyPng&quot;&gt;&lt;/a&gt;TinyPng&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;推荐一个超级好用的图片压缩工具 – &lt;a href=&quot;https://tinypng.c
      
    
    </summary>
    
      <category term="工具" scheme="https://daihanglin.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Android" scheme="https://daihanglin.github.io/tags/Android/"/>
    
  </entry>
  
</feed>
